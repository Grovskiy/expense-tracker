import{K as L,ak as re,L as $,_ as J,g as P,M as R,N as Z,O as F,a0 as ie,m as f,r as N,U as se,k as oe,P as ue,Q as C,o as u,c as d,a as G,T as b,V as v,S as g,b as Y,D as k,al as de,J as fe,h as A,a5 as S,F as j,d as O,t as E,a6 as ce,am as me,a9 as ge}from"./entry.071f0fe9.js";import{u as pe,s as ye}from"./usePopper.2af3cb2f.js";const ve={wrapper:"",label:{wrapper:"flex content-center items-center justify-between",base:"block font-medium text-gray-700 dark:text-gray-200",required:"after:content-['*'] after:ms-0.5 after:text-red-500 dark:after:text-red-400"},size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},container:"mt-1 relative",description:"text-gray-500 dark:text-gray-400",hint:"text-gray-500 dark:text-gray-400",help:"mt-2 text-gray-500 dark:text-gray-400",error:"mt-2 text-red-500 dark:text-red-400",default:{size:"sm"}},h=L($.ui.strategy,$.ui.input,re),he=P({components:{UIcon:R},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>h.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(h.size).includes(e)}},color:{type:String,default:()=>h.default.color,validator(e){return[...$.ui.colors,...Object.keys(h.color)].includes(e)}},variant:{type:String,default:()=>h.default.variant,validator(e){return[...Object.keys(h.variant),...Object.values(h.color).flatMap(t=>Object.keys(t))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur"],setup(e,{emit:t,slots:r}){const{ui:a,attrs:l}=Z("input",F(e,"ui"),h,F(e,"class")),{size:p,rounded:m}=ie({ui:a,props:e}),{emitFormBlur:c,emitFormInput:I,size:n,color:i,inputId:y,name:w}=pe(e,h),o=f(()=>p.value||n.value),z=N(se({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),T=N(null),K=()=>{var s;e.autofocus&&((s=T.value)==null||s.focus())},U=s=>{z.value.trim&&(s=s.trim()),(z.value.number||e.type==="number")&&(s=de(s)),t("update:modelValue",s),I()},Q=s=>{z.value.lazy||U(s.target.value)},H=s=>{const B=s.target.value;z.value.lazy&&U(B),z.value.trim&&(s.target.value=B.trim())},X=s=>{c(),t("blur",s)};oe(()=>{setTimeout(()=>{K()},e.autofocusDelay)});const _=f(()=>{var B,W;const s=((W=(B=a.value.color)==null?void 0:B[i.value])==null?void 0:W[e.variant])||a.value.variant[e.variant];return ue(C(a.value.base,a.value.form,m.value,a.value.placeholder,a.value.size[o.value],e.padded?a.value.padding[o.value]:"p-0",s==null?void 0:s.replaceAll("{color}",i.value),(V.value||r.leading)&&a.value.leading.padding[o.value],(D.value||r.trailing)&&a.value.trailing.padding[o.value]),e.inputClass)}),V=f(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),D=f(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),x=f(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),ee=f(()=>e.loading&&!V.value?e.loadingIcon:e.trailingIcon||e.icon),ae=f(()=>C(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[o.value])),ne=f(()=>C(a.value.icon.base,i.value&&$.ui.colors.includes(i.value)&&a.value.icon.color.replaceAll("{color}",i.value),a.value.icon.size[o.value],e.loading&&a.value.icon.loading)),te=f(()=>C(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[o.value])),le=f(()=>C(a.value.icon.base,i.value&&$.ui.colors.includes(i.value)&&a.value.icon.color.replaceAll("{color}",i.value),a.value.icon.size[o.value],e.loading&&!V.value&&a.value.icon.loading));return{ui:a,attrs:l,name:w,inputId:y,input:T,isLeading:V,isTrailing:D,inputClass:_,leadingIconName:x,leadingIconClass:ne,leadingWrapperIconClass:ae,trailingIconName:ee,trailingIconClass:le,trailingWrapperIconClass:te,onInput:Q,onChange:H,onBlur:X}}}),be=["id","name","value","type","required","placeholder","disabled"];function $e(e,t,r,a,l,p){const m=R;return u(),d("div",{class:g(e.ui.wrapper)},[G("input",b({id:e.inputId,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled||e.loading,class:e.inputClass},e.attrs,{onInput:t[0]||(t[0]=(...c)=>e.onInput&&e.onInput(...c)),onBlur:t[1]||(t[1]=(...c)=>e.onBlur&&e.onBlur(...c)),onChange:t[2]||(t[2]=(...c)=>e.onChange&&e.onChange(...c))}),null,16,be),v(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(u(),d("span",{key:0,class:g(e.leadingWrapperIconClass)},[v(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[Y(m,{name:e.leadingIconName,class:g(e.leadingIconClass)},null,8,["name","class"])])],2)):k("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(u(),d("span",{key:1,class:g(e.trailingWrapperIconClass)},[v(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[Y(m,{name:e.trailingIconName,class:g(e.trailingIconClass)},null,8,["name","class"])])],2)):k("",!0)],2)}const Je=J(he,[["render",$e]]),M=L($.ui.strategy,$.ui.formGroup,ve),Ie=P({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(M.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},eagerValidation:{type:Boolean,default:!1}},setup(e){const{ui:t,attrs:r}=Z("formGroup",F(e,"ui"),M,F(e,"class")),a=fe("form-errors",null),l=f(()=>{var c,I;return e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:(I=(c=a==null?void 0:a.value)==null?void 0:c.find(n=>n.path===e.name))==null?void 0:I.message}),p=f(()=>t.value.size[e.size??M.default.size]),m=N();return A("form-group",{error:l,inputId:m,name:f(()=>e.name),size:f(()=>e.size),eagerValidation:f(()=>e.eagerValidation)}),{ui:t,attrs:r,inputId:m,size:p,error:l}}}),Se=["for"];function ke(e,t,r,a,l,p){return u(),d("div",b({class:e.ui.wrapper},e.attrs),[e.label||e.$slots.label?(u(),d("div",{key:0,class:g([e.ui.label.wrapper,e.size])},[G("label",{for:e.inputId,class:g([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?v(e.$slots,"label",S(b({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(u(),d(j,{key:1},[O(E(e.label),1)],64))],10,Se),e.hint||e.$slots.hint?(u(),d("span",{key:0,class:g([e.ui.hint])},[e.$slots.hint?v(e.$slots,"hint",S(b({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(u(),d(j,{key:1},[O(E(e.hint),1)],64))],2)):k("",!0)],2)):k("",!0),e.description||e.$slots.description?(u(),d("p",{key:1,class:g([e.ui.description,e.size])},[e.$slots.description?v(e.$slots,"description",S(b({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(u(),d(j,{key:1},[O(E(e.description),1)],64))],2)):k("",!0),G("div",{class:g([e.label?e.ui.container:""])},[v(e.$slots,"default",S(ce({error:e.error}))),typeof e.error=="string"&&e.error||e.$slots.error?(u(),d("p",{key:0,class:g([e.ui.error,e.size])},[e.$slots.error?v(e.$slots,"error",S(b({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(u(),d(j,{key:1},[O(E(e.error),1)],64))],2)):e.help||e.$slots.help?(u(),d("p",{key:1,class:g([e.ui.help,e.size])},[e.$slots.help?v(e.$slots,"help",S(b({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(u(),d(j,{key:1},[O(E(e.help),1)],64))],2)):k("",!0)],2)],16)}const Pe=J(Ie,[["render",ke]]);class q extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,q.prototype)}}const we=P({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:t,emit:r}){const a=me(`form-${ye()}`);a.on(async n=>{var i;n.type!=="submit"&&((i=e.validateOn)!=null&&i.includes(n.type))&&await c(n.path,{silent:!0})});const l=N([]);A("form-errors",l),A("form-events",a);const p=N({});A("form-inputs",p);async function m(){let n=await e.validate(e.state);if(e.schema)if(je(e.schema))n=n.concat(await Oe(e.state,e.schema));else if(ze(e.schema))n=n.concat(await Ce(e.state,e.schema));else if(Ee(e.schema))n=n.concat(await Ve(e.state,e.schema));else if(Ae(e.schema))n=n.concat(await Fe(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return n}async function c(n,i={silent:!1}){if(n){const y=l.value.filter(o=>o.path!==n),w=(await m()).filter(o=>o.path===n);l.value=y.concat(w)}else l.value=await m();if(!i.silent&&l.value.length>0)throw new q(`Form validation failed: ${JSON.stringify(l.value,null,2)}`);return e.state}async function I(n){var i;try{(i=e.validateOn)!=null&&i.includes("submit")&&await c();const y={...n,data:e.state};r("submit",y)}catch(y){if(!(y instanceof q))throw y;const w={...n,errors:l.value.map(o=>({...o,id:p.value[o.path]}))};r("error",w)}}return t({validate:c,errors:l,setErrors(n,i){l.value=n,i?l.value=l.value.filter(y=>y.path!==i).concat(n):l.value=n},getErrors(n){return n?l.value.filter(i=>i.path===n):l.value},clear(n){n?l.value=l.value.filter(i=>i.path===n):l.value=[]}}),{onSubmit:I}}});function ze(e){return e.validate&&e.__isYupSchema__}function Be(e){return e.inner!==void 0}async function Ce(e,t){try{return await t.validate(e,{abortEarly:!1}),[]}catch(r){if(Be(r))return r.inner.map(a=>({path:a.path??"",message:a.message}));throw r}}function je(e){return e.parse!==void 0}async function Oe(e,t){const r=await t.safeParseAsync(e);return r.success===!1?r.error.issues.map(a=>({path:a.path.join("."),message:a.message})):[]}function Ee(e){return e.validateAsync!==void 0&&e.id!==void 0}function Ne(e){return e.isJoi===!0}async function Ve(e,t){try{return await t.validateAsync(e,{abortEarly:!1}),[]}catch(r){if(Ne(r))return r.details.map(a=>({path:a.path.join("."),message:a.message}));throw r}}function Ae(e){return e._parse!==void 0}async function Fe(e,t){const r=await t._parse(e);return r.issues?r.issues.map(a=>{var l;return{path:((l=a.path)==null?void 0:l.map(p=>p.key).join("."))||"",message:a.message}}):[]}function qe(e,t,r,a,l,p){return u(),d("form",{onSubmit:t[0]||(t[0]=ge((...m)=>e.onSubmit&&e.onSubmit(...m),["prevent"]))},[v(e.$slots,"default")],32)}const Te=J(we,[["render",qe]]);export{Je as _,Pe as a,Te as b};
