import{au as i,av as o,y as d,aw as l}from"./entry.f29eb4ec.js";function f(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function m(){return/Android/gi.test(window.navigator.userAgent)}function w(){return f()||m()}function h(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(r=>setTimeout(()=>{throw r}))}function p(){let n=[],r={addEventListener(e,t,s,a){return e.addEventListener(t,s,a),r.add(()=>e.removeEventListener(t,s,a))},requestAnimationFrame(...e){let t=requestAnimationFrame(...e);r.add(()=>cancelAnimationFrame(t))},nextFrame(...e){r.requestAnimationFrame(()=>{r.requestAnimationFrame(...e)})},setTimeout(...e){let t=setTimeout(...e);r.add(()=>clearTimeout(t))},microTask(...e){let t={current:!0};return h(()=>{t.current&&e[0]()}),r.add(()=>{t.current=!1})},style(e,t,s){let a=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:s}),this.add(()=>{Object.assign(e.style,{[t]:a})})},group(e){let t=p();return e(t),this.add(()=>t.dispose())},add(e){return n.push(e),()=>{let t=n.indexOf(e);if(t>=0)for(let s of n.splice(t,1))s()}},dispose(){for(let e of n.splice(0))e()}};return r}const u=l(),c=i.create({baseURL:u.public.baseUrl,async onRequest({options:n}){const r=o("token").value;r&&(n.headers={...n.headers,Authorization:`Bearer ${r}`})},async onResponse({response:n}){const{setAuthenticated:r}=d();if(n.status===401&&o("tokenRefresh").value){const{accessToken:e,refreshToken:t}=await i("/api/Authentication/refresh-token",{baseURL:u.public.baseUrl,method:"POST",body:{accessToken:o("token").value,refreshToken:o("tokenRefresh").value}});r({accessToken:e,refreshToken:t})}}}),g=async(n,r)=>{var e,t;try{return(await c.raw(n,r))._data}catch(s){const a=s;return((e=a.response)==null?void 0:e.status)===401&&o("tokenRefresh").value?(await c.raw(n,r))._data:(t=a.response)==null?void 0:t._data}};export{f as a,w as n,p as o,g as r,h as t};
