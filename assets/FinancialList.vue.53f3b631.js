import{g as T,s as ne,C as me,i as pe,m as h,o as v,c as V,b,a as z,t as E,n as l,B as U,D as O,K as ue,L,Z as Ce,_ as ve,x as ie,N as ye,O as oe,V as J,T as q,F as R,v as le,$ as $e,M as re,a0 as ke,P as Ae,Q as ee,S as H,a1 as ae,J as de,r as P,l as ge,k as ce,q as se,w as F,a2 as _e,d as Be,j as Ve,a3 as Se}from"./entry.719a8b13.js";import{b as be,D as De,u as he,a as Fe,_ as ze}from"./CurrenciesList.vue.90b28cee.js";import{u as Ue}from"./usePopper.5fc39265.js";import{_ as xe}from"./Slideover.8a3afd98.js";import{_ as Oe,a as Me,b as we}from"./Form.51a42edf.js";import{_ as je}from"./CategoriesCreate.vue.4475177f.js";import{_ as Ie,a as Le}from"./Skeleton.3addd810.js";const Ne={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}};var W=(e=>(e.Cancelled="Cancelled",e.Active="Active",e))(W||{});const qe=(e,d)=>{const y=new Map([["USD","en-IN"],["EUR","es-ES"],["UAH","uk-UK"]]);return Intl.NumberFormat(y.get(e),{style:"currency",currency:e,maximumSignificantDigits:3}).format(d)},Pe={class:"ml-auto"},Re=T({__name:"SubsciptionItem",props:{id:{},text:{},value:{},status:{},categoryId:{},currencyId:{}},emits:["click"],setup(e,{emit:d}){const{familyCategories:y}=ne(me()),{currencies:a}=ne(pe()),n=e,f=g=>{var u;return(u=y.value.filter(I=>I.id===g)[0])==null?void 0:u.name},t=()=>{var g;return(g=a.value.filter(u=>u.id===n.currencyId)[0])==null?void 0:g.code},s=h(()=>n.status===W.Active?"green":"red"),m=h(()=>t()?qe(t(),n.value):n.value),i=d;return(g,u)=>{const I=be;return v(),V("div",{class:"flex gap-2 items-center text-sm text-current p-1 hover:bg-slate-200 cursor-pointer",onClick:u[0]||(u[0]=B=>i("click"))},[b(I,{color:"indigo",variant:"outline",label:f(n.categoryId)},null,8,["label"]),z("div",null,E(n.text),1),z("div",Pe,E(l(m)),1),n.status?(v(),U(I,{key:0,color:l(s),variant:"outline",label:n.status},null,8,["color","label"])):O("",!0)])}}}),N=ue(L.ui.strategy,L.ui.pagination,Ne),Ee=ue(L.ui.strategy,L.ui.button,Ce),We=T({components:{UButton:ie},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},size:{type:String,default:()=>N.default.size,validator(e){return Object.keys(Ee.size).includes(e)}},activeButton:{type:Object,default:()=>N.default.activeButton},inactiveButton:{type:Object,default:()=>N.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>N.default.firstButton},lastButton:{type:Object,default:()=>N.default.lastButton},prevButton:{type:Object,default:()=>N.default.prevButton},nextButton:{type:Object,default:()=>N.default.nextButton},divider:{type:String,default:"…"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:d}){const{ui:y,attrs:a}=ye("pagination",oe(e,"ui"),N,oe(e,"class")),n=h({get(){return e.modelValue},set(k){d("update:modelValue",k)}}),f=h(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(k,A)=>A+1)),t=h(()=>{const k=f.value.length,A=n.value,x=Math.max(e.max,5),_=Math.floor((Math.min(x,k)-5)/2),j=A-_,$=A+_,p=j-1>1,M=$+1<k,o=[];if(k<=x){for(let r=1;r<=k;r++)o.push(r);return o}if(o.push(1),p&&o.push(e.divider),!M){const r=A+_+2-k;for(let S=A-_-r;S<=A-_-1;S++)o.push(S)}for(let r=Math.max(2,j);r<=Math.min(k,$);r++)o.push(r);if(!p){const r=1-(A-_-2);for(let S=A+_+1;S<=A+_+r;S++)o.push(S)}return M&&o.push(e.divider),$<k&&o.push(k),o.length>=3&&o[1]===e.divider&&o[2]===3&&(o[1]=2),o.length>=3&&o[o.length-2]===e.divider&&o[o.length-1]===o.length&&(o[o.length-2]=o.length-1),o}),s=h(()=>n.value>1),m=h(()=>n.value<f.value.length);function i(){s.value&&(n.value=1)}function g(){m.value&&(n.value=f.value.length)}function u(k){typeof k!="string"&&(n.value=k)}function I(){s.value&&n.value--}function B(){m.value&&n.value++}return{ui:y,attrs:a,currentPage:n,pages:f,displayedPages:t,canGoLastOrNext:m,canGoFirstOrPrev:s,onClickPrev:I,onClickNext:B,onClickPage:u,onClickFirst:i,onClickLast:g}}});function Te(e,d,y,a,n,f){const t=ie;return v(),V("div",q({class:e.ui.wrapper},e.attrs),[J(e.$slots,"first",{onClick:e.onClickFirst},()=>[e.firstButton&&e.showFirst?(v(),U(t,q({key:0,size:e.size,disabled:!e.canGoFirstOrPrev,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","disabled","class","onClick"])):O("",!0)]),J(e.$slots,"prev",{onClick:e.onClickPrev},()=>[e.prevButton?(v(),U(t,q({key:0,size:e.size,disabled:!e.canGoFirstOrPrev,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","disabled","class","onClick"])):O("",!0)]),(v(!0),V(R,null,le(e.displayedPages,(s,m)=>(v(),U(t,q({key:`${s}-${m}`,size:e.size,label:`${s}`},s===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof s=="string","z-[1]":s===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(s)}),null,16,["size","label","class","onClick"]))),128)),J(e.$slots,"next",{onClick:e.onClickNext},()=>[e.nextButton?(v(),U(t,q({key:0,size:e.size,disabled:!e.canGoLastOrNext,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","disabled","class","onClick"])):O("",!0)]),J(e.$slots,"last",{onClick:e.onClickLast},()=>[e.lastButton&&e.showLast?(v(),U(t,q({key:0,size:e.size,disabled:!e.canGoLastOrNext,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","disabled","class","onClick"])):O("",!0)])],16)}const Ge=ve(We,[["render",Te]]),w=ue(L.ui.strategy,L.ui.select,$e),Ke=T({components:{UIcon:re},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>w.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>w.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator(e){return Object.keys(w.size).includes(e)}},color:{type:String,default:()=>w.default.color,validator(e){return[...L.ui.colors,...Object.keys(w.color)].includes(e)}},variant:{type:String,default:()=>w.default.variant,validator(e){return[...Object.keys(w.variant),...Object.values(w.color).flatMap(d=>Object.keys(d))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:d,slots:y}){const{ui:a,attrs:n}=ye("select",oe(e,"ui"),w,oe(e,"class")),{size:f,rounded:t}=ke({ui:a,props:e}),{emitFormChange:s,inputId:m,color:i,size:g,name:u}=Ue(e,w),I=h(()=>f.value||g.value),B=C=>{d("update:modelValue",C.target.value)},k=C=>{s(),d("change",C)},A=C=>ae(C,e.valueAttribute,ae(C,e.optionAttribute)),x=C=>ae(C,e.optionAttribute,ae(C,e.valueAttribute)),_=C=>["string","number","boolean"].includes(typeof C)?{[e.valueAttribute]:C,[e.optionAttribute]:C}:{...C,[e.valueAttribute]:A(C),[e.optionAttribute]:x(C)},j=h(()=>e.options.map(C=>_(C))),$=h(()=>e.placeholder?[{[e.valueAttribute]:"",[e.optionAttribute]:e.placeholder,disabled:!0},...j.value]:j.value),p=h(()=>{const C=_(e.modelValue),Y=$.value.find(te=>te[e.valueAttribute]===C[e.valueAttribute]);return Y?Y[e.valueAttribute]:""}),M=h(()=>{var Y,te;const C=((te=(Y=a.value.color)==null?void 0:Y[i.value])==null?void 0:te[e.variant])||a.value.variant[e.variant];return Ae(ee(a.value.base,a.value.form,t.value,a.value.size[I.value],e.padded?a.value.padding[I.value]:"p-0",C==null?void 0:C.replaceAll("{color}",i.value),(o.value||y.leading)&&a.value.leading.padding[I.value],(r.value||y.trailing)&&a.value.trailing.padding[I.value]),e.selectClass)}),o=h(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),r=h(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),S=h(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),G=h(()=>e.loading&&!o.value?e.loadingIcon:e.trailingIcon||e.icon),K=h(()=>ee(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[I.value])),Q=h(()=>ee(a.value.icon.base,i.value&&L.ui.colors.includes(i.value)&&a.value.icon.color.replaceAll("{color}",i.value),a.value.icon.size[I.value],e.loading&&a.value.icon.loading)),Z=h(()=>ee(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[I.value])),c=h(()=>ee(a.value.icon.base,i.value&&L.ui.colors.includes(i.value)&&a.value.icon.color.replaceAll("{color}",i.value),a.value.icon.size[I.value],e.loading&&!o.value&&a.value.icon.loading));return{ui:a,attrs:n,name:u,inputId:m,normalizedOptionsWithPlaceholder:$,normalizedValue:p,isLeading:o,isTrailing:r,selectClass:M,leadingIconName:S,leadingIconClass:Q,leadingWrapperIconClass:K,trailingIconName:G,trailingIconClass:c,trailingWrapperIconClass:Z,onInput:B,onChange:k}}}),Qe=["id","name","value","required","disabled"],He=["value","label"],Je=["value","selected","disabled","textContent"],Xe=["value","selected","disabled","textContent"];function Ze(e,d,y,a,n,f){const t=re;return v(),V("div",{class:H(e.ui.wrapper)},[z("select",q({id:e.inputId,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled||e.loading,class:e.selectClass},e.attrs,{onInput:d[0]||(d[0]=(...s)=>e.onInput&&e.onInput(...s)),onChange:d[1]||(d[1]=(...s)=>e.onChange&&e.onChange(...s))}),[(v(!0),V(R,null,le(e.normalizedOptionsWithPlaceholder,(s,m)=>(v(),V(R,null,[s.children?(v(),V("optgroup",{key:`${s[e.valueAttribute]}-optgroup-${m}`,value:s[e.valueAttribute],label:s[e.optionAttribute]},[(v(!0),V(R,null,le(s.children,(i,g)=>(v(),V("option",{key:`${i[e.valueAttribute]}-${m}-${g}`,value:i[e.valueAttribute],selected:i[e.valueAttribute]===e.normalizedValue,disabled:i.disabled,textContent:E(i[e.optionAttribute])},null,8,Je))),128))],8,He)):(v(),V("option",{key:`${s[e.valueAttribute]}-${m}`,value:s[e.valueAttribute],selected:s[e.valueAttribute]===e.normalizedValue,disabled:s.disabled,textContent:E(s[e.optionAttribute])},null,8,Xe))],64))),256))],16,Qe),e.isLeading&&e.leadingIconName||e.$slots.leading?(v(),V("span",{key:0,class:H(e.leadingWrapperIconClass)},[J(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[b(t,{name:e.leadingIconName,class:H(e.leadingIconClass)},null,8,["name","class"])])],2)):O("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(v(),V("span",{key:1,class:H(e.trailingWrapperIconClass)},[J(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[b(t,{name:e.trailingIconName,class:H(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):O("",!0)],2)}const Ye=ve(Ke,[["render",Ze]]),et=()=>{const a=[];for(let n=5;n<=50;n+=5)a.push(`${n}`);return a},fe=Symbol();var D=(e=>(e.Expenses="Expenses",e.Incomes="Incomes",e.RepeatableExpenses="RepeatableExpenses",e.RepeatableIncomes="RepeatableIncomes",e))(D||{});const tt=T({__name:"CategoriesFamilyList",props:{categoryId:{default:"",type:String,required:!1}},emits:["update"],setup(e,{emit:d}){const y=de(fe),a=e,n=me(),{familyCategoriesIncome:f,familyCategoriesExpense:t,familyLoaded:s}=ne(n),m=h(()=>y===D.Incomes||y===D.RepeatableIncomes?f.value:t.value),i=d,g=P(m.value[0]);ge(s,()=>{g.value=m.value[0],u()}),ce(()=>{a.categoryId&&(g.value=m.value.filter(I=>I.id===a.categoryId)[0]),u()});function u(){i("update",g.value)}return(I,B)=>{const k=je,A=Ie,x=Le;return l(s)&&!l(m).length?(v(),U(k,{key:0})):l(s)?(v(),U(A,{key:1,modelValue:l(g),"onUpdate:modelValue":B[0]||(B[0]=_=>se(g)?g.value=_:null),options:l(m),class:"h-8","option-attribute":"name",onChange:u},null,8,["modelValue","options"])):(v(),U(x,{key:2,class:"h-8"}))}}}),at={class:"relative"},nt=T({__name:"DatePicker",setup(e){const d=P("");return(y,a)=>{const n=re,f=be;return v(),U(l(De),{modelValue:l(d),"onUpdate:modelValue":a[0]||(a[0]=t=>se(d)?d.value=t:null),color:"gray","is-dark":y.$colorMode.value==="dark"},{default:F(({inputValue:t,inputEvents:s})=>[z("div",at,[b(f,q({color:"white",variant:"solid",size:"lg"},_e(s),{class:"cursor-default"}),{default:F(()=>[Be(E(t)+" ",1),b(n,{name:"i-heroicons-calendar-days",class:"ml-1"})]),_:2},1040)])]),_:1},8,["modelValue","is-dark"])}}});var X=(e=>(e.Weekly="Weekly",e.BiWeekly="BiWeekly",e.EveryFourWeeks="EveryFourWeeks",e.Monthly="Monthly",e.Quarterly="Quarterly",e.SemiAnnually="SemiAnnually",e.Annuall="Annually",e))(X||{});const ot={class:"-mt-14 mb-4 text-center"},lt={class:"text-gray-500 dark:text-gray-400 text-xs"},st=z("span",{class:"text-gray-500 dark:text-gray-400 text-xs"},"%",-1),it={class:"flex space-x-4"},ut={key:0,class:"flex space-x-4"},rt={class:"flex justify-between space-x-2"},dt=T({__name:"FinancialAdd",props:{editMode:{type:Boolean},payload:{}},emits:["editDone","createDone","deleteDone"],setup(e,{emit:d}){const{currencies:y}=ne(pe()),a=de(fe),n=he(),f=e,t=P({id:"",value:0,tax:0,text:"",date:n().utc().format(),anotherDate:n().add(30,"day").utc().format(),frequency:X.Weekly,status:W.Active,categoryId:"",currencyId:""}),s=Object.values(X),m=Object.values(W),i=h(()=>{var $;return($=y.value.filter(p=>p.id===t.value.currencyId)[0])==null?void 0:$.code}),g=h(()=>a===D.RepeatableExpenses),u=h(()=>a===D.RepeatableIncomes),I=h(()=>a===D.Incomes);ce(()=>{f.editMode&&(t.value=f.payload)});const B=d,k=$=>{const p=[];return $.value===0&&p.push({path:"value",message:"Значення має бути більше 0"}),p};async function A(){f.editMode?B("editDone",t.value):B("createDone",t.value)}function x($){t.value.categoryId=$==null?void 0:$.id}function _($){t.value.currencyId=$.id}const j=()=>{const $={[D.Expenses]:"",[D.Incomes]:"",[D.RepeatableIncomes]:"Наступна дата вкладу",[D.RepeatableExpenses]:"Наступна дата виставлення рахунку"};return a?$[a]:"Another date"};return($,p)=>{const M=Oe,o=Me,r=Fe,S=tt,G=nt,K=Ie,Q=ie,Z=we;return v(),V(R,null,[z("h3",ot,E(f.editMode?"Редагування":"Додавання"),1),b(Z,{validate:k,state:l(t),class:"flex flex-col space-y-3",onSubmit:A},{default:F(()=>[z("div",{class:H({"flex space-x-4":l(I)||l(u)})},[b(o,{label:"Сума",name:"value"},{default:F(()=>[b(M,{placeholder:"1 200",modelValue:l(t).value,"onUpdate:modelValue":p[0]||(p[0]=c=>l(t).value=c),type:"number"},{trailing:F(()=>[z("span",lt,E(l(i)),1)]),_:1},8,["modelValue"])]),_:1}),l(I)||l(u)?(v(),U(o,{key:0,label:"Податок",name:"tax"},{default:F(()=>[b(M,{placeholder:"Податок",modelValue:l(t).tax,"onUpdate:modelValue":p[1]||(p[1]=c=>l(t).tax=c),type:"number"},{trailing:F(()=>[st]),_:1},8,["modelValue"])]),_:1})):O("",!0)],2),b(o,{label:"Валюта",name:"currencies"},{default:F(()=>[b(r,{"currency-id":f.payload.currencyId,onUpdate:_},null,8,["currency-id"])]),_:1}),b(o,{label:"Нотатка",name:"text"},{default:F(()=>[b(M,{placeholder:"Продукти та кока кола...",modelValue:l(t).text,"onUpdate:modelValue":p[2]||(p[2]=c=>l(t).text=c),type:"text"},null,8,["modelValue"])]),_:1}),b(o,{label:"Категорія",name:"categories"},{default:F(()=>[b(S,{"category-id":f.payload.categoryId,onUpdate:x},null,8,["category-id"])]),_:1}),z("div",it,[b(o,{label:"Дата"},{default:F(()=>[b(G,{modelValue:l(t).date,"onUpdate:modelValue":p[3]||(p[3]=c=>l(t).date=c)},null,8,["modelValue"])]),_:1}),l(u)||l(g)?(v(),U(o,{key:0,label:j()},{default:F(()=>[b(G,{modelValue:l(t).anotherDate,"onUpdate:modelValue":p[4]||(p[4]=c=>l(t).anotherDate=c)},null,8,["modelValue"])]),_:1},8,["label"])):O("",!0)]),l(u)||l(g)?(v(),V("div",ut,[b(o,{label:"Frequency",name:"frequency"},{default:F(()=>[b(K,{modelValue:l(t).frequency,"onUpdate:modelValue":p[5]||(p[5]=c=>l(t).frequency=c),options:l(s),class:"h-8"},null,8,["modelValue","options"])]),_:1}),b(o,{label:"Status",name:"status"},{default:F(()=>[b(K,{modelValue:l(t).status,"onUpdate:modelValue":p[6]||(p[6]=c=>l(t).status=c),options:l(m),class:"h-8"},null,8,["modelValue","options"])]),_:1})])):O("",!0),z("div",rt,[b(Q,{type:"submit",label:"Готово"}),f.editMode?(v(),U(Q,{key:0,label:"Видалити",color:"rose",variant:"ghost",onClick:p[7]||(p[7]=c=>B("deleteDone"))})):O("",!0)])]),_:1},8,["state"])],64)}}});function ct(){async function e(t,s,m,i){return $fetch("/api/Expenses",{method:"get",query:{limit:t,offset:s,dateFrom:m,dateTo:i}}).then(g=>{const u=g;return{data:u.data.map(B=>f(B)),limit:u.limit,offset:u.offset,total:u.total}})}function d(t){return $fetch("/api/Expenses",{method:"post",body:n(t)})}function y(t){return $fetch(`/api/Expenses/${t.id}`,{method:"put",body:n(t)})}function a(t){return $fetch(`/api/Expenses/${t}`,{method:"delete",body:{}})}function n(t){return{notes:t.text,cost:t.value,date:t.date,categoryId:t.categoryId,currencyId:t.currencyId}}function f(t){return{id:t.id,text:t.notes,value:t.cost,tax:0,date:t.date,anotherDate:"",frequency:X.Weekly,status:W.Active,categoryId:t.categoryId,currencyId:t.currencyId}}return{getFinancial:e,postFinancial:d,changeFinancial:y,deleteFinancial:a}}function ft(){async function e(t,s,m,i){return $fetch("/api/Incomes",{method:"get",query:{limit:t,offset:s,dateFrom:m,dateTo:i}}).then(g=>{const u=g;return{data:u.data.map(B=>f(B)),limit:u.limit,offset:u.offset,total:u.total}})}function d(t){return $fetch("/api/Incomes",{method:"post",body:n(t)})}function y(t){return $fetch(`/api/Incomes/${t.id}`,{method:"put",body:n(t)})}function a(t){return $fetch(`/api/Incomes/${t}`,{method:"delete",body:{}})}function n(t){return{notes:t.text,amount:t.value,taxAmount:t.tax,date:t.date,categoryId:t.categoryId,currencyId:t.currencyId}}function f(t){return{id:t.id,text:t.notes,value:t.amount,tax:t.taxAmount,date:t.date,anotherDate:"",frequency:X.Weekly,status:W.Active,categoryId:t.categoryId,currencyId:t.currencyId}}return{getFinancial:e,postFinancial:d,changeFinancial:y,deleteFinancial:a}}function mt(){async function e(t,s){return $fetch("/api/RepeatableIncomes",{method:"get",query:{limit:t,offset:s}}).then(m=>{const i=m;return{data:i.data.map(u=>f(u)),limit:i.limit,offset:i.offset,total:i.total}})}function d(t){return $fetch("/api/RepeatableIncomes",{method:"post",body:n(t)})}function y(t){return $fetch(`/api/RepeatableIncomes/${t.id}`,{method:"put",body:n(t)})}function a(t){return $fetch(`/api/RepeatableIncomes/${t}`,{method:"delete",body:{}})}function n(t){return{name:t.text,amount:t.value,taxAmount:t.tax,startDate:t.date,nextDepositDate:t.anotherDate,frequency:t.frequency,status:t.status,categoryId:t.categoryId,currencyId:t.currencyId}}function f(t){return{id:t.id,text:t.name,value:t.amount,tax:t.taxAmount,date:t.startDate,anotherDate:t.nextDepositDate,frequency:t.frequency,status:t.status,categoryId:t.categoryId,currencyId:t.currencyId}}return{getFinancial:e,postFinancial:d,changeFinancial:y,deleteFinancial:a}}function pt(){async function e(t,s){return $fetch("/api/Subscriptions",{method:"get",query:{limit:t,offset:s}}).then(m=>{const i=m;return{data:i.data.map(u=>f(u)),limit:i.limit,offset:i.offset,total:i.total}})}async function d(t){return $fetch("/api/Subscriptions",{method:"post",body:n(t)})}function y(t){return $fetch(`/api/Subscriptions/${t.id}`,{method:"put",body:n(t)})}function a(t){return $fetch(`/api/Subscriptions/${t}`,{method:"delete",body:{}})}function n(t){return{name:t.text,cost:t.value,startDate:t.date,nextBillingDate:t.anotherDate,frequency:t.frequency,status:t.status,categoryId:t.categoryId,currencyId:t.currencyId}}function f(t){return{id:t.id,text:t.name,value:t.cost,tax:0,date:t.startDate,anotherDate:t.nextBillingDate,frequency:t.frequency,status:t.status,categoryId:t.categoryId,currencyId:t.currencyId}}return{getFinancial:e,postFinancial:d,changeFinancial:y,deleteFinancial:a}}const vt=e=>{switch(e){case D.Incomes:return ft();case D.Expenses:return ct();case D.RepeatableExpenses:return pt();case D.RepeatableIncomes:return mt();default:throw new Error("Invalid mode provided")}},yt={class:"flex flex-col max-w-sm mx-auto"},gt={key:0,class:"flex justify-between mt-4 mb-2"},bt={class:"flex mt-4"},ht={class:"overflow-auto h-full"},It={class:"flex items-center justify-end m-2"},Ct={class:"px-4 py-5 flex-1"},Dt=T({__name:"FinancialList",setup(e){const d=de(fe),y=vt(d),a=he(),n=P({start:a().add(-30,"day").utc().format(),end:a().utc().format()}),f=et(),t=Ve({financialArray:[],page:1,totalItems:5,selectedLimitItems:f[2]}),s=h(()=>parseInt(t.selectedLimitItems)),m=h(()=>(t.page-1)*s.value);ge(()=>t.page,()=>{u()});const i=h(()=>d===D.Incomes),g=h(()=>d===D.Expenses);ce(()=>{u()});async function u(){const o=i||g?[s.value,m.value,n.value.start,n.value.end]:[s.value,m.value],r=await y.getFinancial(...o);t.financialArray=r.data,t.totalItems=r.total,m.value>t.totalItems&&(t.page=1)}async function I(o){await y.postFinancial(o).then(()=>$("Створено"))}async function B(o){await y.changeFinancial(o).then(()=>$("Змінено"))}async function k(o){await y.deleteFinancial(o).then(()=>$("Видалено"))}const A=P({id:"",value:0,tax:0,text:"",date:"",anotherDate:"",frequency:X.Weekly,status:W.Active,categoryId:"",currencyId:""}),x=P(!1),_=P(!1),j=o=>{A.value=o,p(!0,!0)},$=o=>{Se().add({title:o,timeout:3e3}),M(),p(!1,!1)},p=(o,r)=>{x.value=o,_.value=r},M=()=>{n.value.end=a(n.value.end).add(1,"hour").utc().format(),u()};return(o,r)=>{const S=ie,G=Re,K=Ge,Q=Ye,Z=xe;return v(),V(R,null,[z("div",yt,[l(i)||l(g)?(v(),V("div",gt,[b(ze,{modelValue:l(n),"onUpdate:modelValue":r[0]||(r[0]=c=>se(n)?n.value=c:null)},null,8,["modelValue"]),b(S,{onClick:u,variant:"outline",icon:"i-heroicons-arrow-path-rounded-square-solid",class:"ml-2"}),b(S,{onClick:r[1]||(r[1]=c=>p(!0,!1)),variant:"outline",icon:"i-heroicons-plus-circle",class:"ml-auto"})])):O("",!0),l(i)||l(g)?O("",!0):(v(),U(S,{key:1,onClick:r[2]||(r[2]=c=>p(!0,!1)),label:`Додати ${l(i)?"надходження":"витрати"}`,variant:"outline",icon:"i-heroicons-plus-circle",class:"mx-auto mb-2"},null,8,["label"])),(v(!0),V(R,null,le(l(t).financialArray,c=>(v(),U(G,{key:c.id,text:c.text,value:c.value,"category-id":c.categoryId,"currency-id":c.currencyId,onClick:C=>j(c),class:"even:bg-slate-50 dark:even:bg-slate-900"},null,8,["text","value","category-id","currency-id","onClick"]))),128)),z("div",bt,[b(K,{modelValue:l(t).page,"onUpdate:modelValue":r[3]||(r[3]=c=>l(t).page=c),"page-count":l(s),total:l(t).totalItems,class:"mr-auto"},null,8,["modelValue","page-count","total"]),b(Q,{modelValue:l(t).selectedLimitItems,"onUpdate:modelValue":r[4]||(r[4]=c=>l(t).selectedLimitItems=c),options:l(f),onChange:u},null,8,["modelValue","options"])])]),b(Z,{modelValue:l(x),"onUpdate:modelValue":r[7]||(r[7]=c=>se(x)?x.value=c:null)},{default:F(()=>[z("div",ht,[z("div",It,[b(S,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",onClick:r[5]||(r[5]=c=>p(!1,!1))})]),z("div",Ct,[b(dt,{"edit-mode":l(_),payload:l(A),onEditDone:B,onCreateDone:I,onDeleteDone:r[6]||(r[6]=c=>k(l(A).id))},null,8,["edit-mode","payload"])])])]),_:1},8,["modelValue"])],64)}}});export{D as F,Dt as _,fe as a};
