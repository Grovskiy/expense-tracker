import{K as de,L as j,_ as ce,g as T,N as fe,O as ne,Z as ye,l as I,P as be,Q as X,o as g,c as B,V as G,d as Ie,t as E,T as W,s as re,B as he,i as ke,b,a as z,m as o,A as O,D as U,$ as Se,v as oe,F as Y,q as ie,a0 as Be,M as me,S as Z,a1 as se,J as pe,r as P,k as Ce,C as ge,n as ue,w as F,j as xe,a2 as Ve}from"./entry.f29eb4ec.js";import{u as _e}from"./usePopper.01768693.js";import{_ as De}from"./Slideover.d820da3e.js";import{D as Fe,u as $e,a as ze,_ as Oe}from"./CurrenciesList.vue.902d2e50.js";import{_ as we,a as Ue,b as je}from"./Form.1d9dda4c.js";import{_ as Me}from"./CategoriesCreate.vue.c4e5802e.js";import{_ as Ae,a as Le}from"./Skeleton.d8a4c260.js";import{r as _}from"./request.a9b6d6f5.js";const Ne={base:"inline-flex items-center",rounded:"rounded-md",font:"font-medium",size:{xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-2 py-1",lg:"text-sm px-2.5 py-1.5"},color:{white:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white dark:bg-gray-900"},gray:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800"},black:{solid:"text-white dark:text-gray-900 bg-gray-900 dark:bg-white"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{size:"sm",variant:"solid",color:"primary"}},Pe={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},q=de(j.ui.strategy,j.ui.badge,Ne),qe=T({inheritAttrs:!1,props:{size:{type:String,default:()=>q.default.size,validator(e){return Object.keys(q.size).includes(e)}},color:{type:String,default:()=>q.default.color,validator(e){return[...j.ui.colors,...Object.keys(q.color)].includes(e)}},variant:{type:String,default:()=>q.default.variant,validator(e){return[...Object.keys(q.variant),...Object.values(q.color).flatMap(r=>Object.keys(r))].includes(e)}},label:{type:[String,Number],default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:r,attrs:p}=fe("badge",ne(e,"ui"),q),{size:a,rounded:n}=ye({ui:r,props:e}),i=I(()=>{var l,d;const t=((d=(l=r.value.color)==null?void 0:l[e.color])==null?void 0:d[e.variant])||r.value.variant[e.variant];return be(X(r.value.base,r.value.font,n.value,r.value.size[a.value],t==null?void 0:t.replaceAll("{color}",e.color)),e.class)});return{attrs:p,badgeClass:i}}});function Re(e,r,p,a,n,i){return g(),B("span",W({class:e.badgeClass},e.attrs),[G(e.$slots,"default",{},()=>[Ie(E(e.label),1)])],16)}const We=ce(qe,[["render",Re]]);var K=(e=>(e.Cancelled="Cancelled",e.Active="Active",e))(K||{});const Ee=(e,r)=>{const p=new Map([["USD","en-IN"],["EUR","es-ES"],["UAH","uk-UK"]]);return Intl.NumberFormat(p.get(e),{style:"currency",currency:e,maximumSignificantDigits:3}).format(r)},Te={class:"ml-auto"},Ge=T({__name:"SubsciptionItem",props:{text:{},value:{},status:{},categoryId:{},currencyId:{}},emits:["click"],setup(e,{emit:r}){const{familyCategories:p}=re(he()),{currencies:a}=re(ke()),n=e,i=y=>{var c;return(c=p.value.filter(h=>h.id===y)[0])==null?void 0:c.name},t=()=>{var y;return(y=a.value.filter(c=>c.id===n.currencyId)[0])==null?void 0:y.code},l=I(()=>n.status===K.Active?"green":"red"),d=I(()=>t()?Ee(t(),n.value):n.value),u=r;return(y,c)=>{const h=We;return g(),B("div",{class:"flex gap-2 items-center text-md text-current p-1 py-2 hover:bg-slate-200 cursor-pointer",onClick:c[0]||(c[0]=x=>u("click"))},[b(h,{color:"indigo",variant:"outline",label:i(n.categoryId)},null,8,["label"]),z("div",null,E(n.text),1),z("div",Te,E(o(d)),1),n.status?(g(),O(h,{key:0,color:o(l),variant:"outline",label:n.status},null,8,["color","label"])):U("",!0)])}}}),R=de(j.ui.strategy,j.ui.pagination,Pe),Ye=de(j.ui.strategy,j.ui.button,Se),Ke=T({components:{UButton:oe},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},size:{type:String,default:()=>R.default.size,validator(e){return Object.keys(Ye.size).includes(e)}},activeButton:{type:Object,default:()=>R.default.activeButton},inactiveButton:{type:Object,default:()=>R.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>R.default.firstButton},lastButton:{type:Object,default:()=>R.default.lastButton},prevButton:{type:Object,default:()=>R.default.prevButton},nextButton:{type:Object,default:()=>R.default.nextButton},divider:{type:String,default:"…"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:r}){const{ui:p,attrs:a}=fe("pagination",ne(e,"ui"),R,ne(e,"class")),n=I({get(){return e.modelValue},set($){r("update:modelValue",$)}}),i=I(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},($,A)=>A+1)),t=I(()=>{const $=i.value.length,A=n.value,w=Math.max(e.max,5),S=Math.floor((Math.min(w,$)-5)/2),N=A-S,C=A+S,v=N-1>1,M=C+1<$,s=[];if($<=w){for(let f=1;f<=$;f++)s.push(f);return s}if(s.push(1),v&&s.push(e.divider),!M){const f=A+S+2-$;for(let D=A-S-f;D<=A-S-1;D++)s.push(D)}for(let f=Math.max(2,N);f<=Math.min($,C);f++)s.push(f);if(!v){const f=1-(A-S-2);for(let D=A+S+1;D<=A+S+f;D++)s.push(D)}return M&&s.push(e.divider),C<$&&s.push($),s.length>=3&&s[1]===e.divider&&s[2]===3&&(s[1]=2),s.length>=3&&s[s.length-2]===e.divider&&s[s.length-1]===s.length&&(s[s.length-2]=s.length-1),s}),l=I(()=>n.value>1),d=I(()=>n.value<i.value.length);function u(){l.value&&(n.value=1)}function y(){d.value&&(n.value=i.value.length)}function c($){typeof $!="string"&&(n.value=$)}function h(){l.value&&n.value--}function x(){d.value&&n.value++}return{ui:p,attrs:a,currentPage:n,pages:i,displayedPages:t,canGoLastOrNext:d,canGoFirstOrPrev:l,onClickPrev:h,onClickNext:x,onClickPage:c,onClickFirst:u,onClickLast:y}}});function Qe(e,r,p,a,n,i){const t=oe;return g(),B("div",W({class:e.ui.wrapper},e.attrs),[G(e.$slots,"first",{onClick:e.onClickFirst},()=>[e.firstButton&&e.showFirst?(g(),O(t,W({key:0,size:e.size,disabled:!e.canGoFirstOrPrev,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","disabled","class","onClick"])):U("",!0)]),G(e.$slots,"prev",{onClick:e.onClickPrev},()=>[e.prevButton?(g(),O(t,W({key:0,size:e.size,disabled:!e.canGoFirstOrPrev,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","disabled","class","onClick"])):U("",!0)]),(g(!0),B(Y,null,ie(e.displayedPages,(l,d)=>(g(),O(t,W({key:`${l}-${d}`,size:e.size,label:`${l}`},l===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof l=="string","z-[1]":l===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(l)}),null,16,["size","label","class","onClick"]))),128)),G(e.$slots,"next",{onClick:e.onClickNext},()=>[e.nextButton?(g(),O(t,W({key:0,size:e.size,disabled:!e.canGoLastOrNext,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","disabled","class","onClick"])):U("",!0)]),G(e.$slots,"last",{onClick:e.onClickLast},()=>[e.lastButton&&e.showLast?(g(),O(t,W({key:0,size:e.size,disabled:!e.canGoLastOrNext,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","disabled","class","onClick"])):U("",!0)])],16)}const He=ce(Ke,[["render",Qe]]),L=de(j.ui.strategy,j.ui.select,Be),Je=T({components:{UIcon:me},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>L.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>L.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator(e){return Object.keys(L.size).includes(e)}},color:{type:String,default:()=>L.default.color,validator(e){return[...j.ui.colors,...Object.keys(L.color)].includes(e)}},variant:{type:String,default:()=>L.default.variant,validator(e){return[...Object.keys(L.variant),...Object.values(L.color).flatMap(r=>Object.keys(r))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:r,slots:p}){const{ui:a,attrs:n}=fe("select",ne(e,"ui"),L,ne(e,"class")),{size:i,rounded:t}=ye({ui:a,props:e}),{emitFormChange:l,inputId:d,color:u,size:y,name:c}=_e(e,L),h=I(()=>i.value||y.value),x=k=>{r("update:modelValue",k.target.value)},$=k=>{l(),r("change",k)},A=k=>se(k,e.valueAttribute,se(k,e.optionAttribute)),w=k=>se(k,e.optionAttribute,se(k,e.valueAttribute)),S=k=>["string","number","boolean"].includes(typeof k)?{[e.valueAttribute]:k,[e.optionAttribute]:k}:{...k,[e.valueAttribute]:A(k),[e.optionAttribute]:w(k)},N=I(()=>e.options.map(k=>S(k))),C=I(()=>e.placeholder?[{[e.valueAttribute]:"",[e.optionAttribute]:e.placeholder,disabled:!0},...N.value]:N.value),v=I(()=>{const k=S(e.modelValue),ae=C.value.find(le=>le[e.valueAttribute]===k[e.valueAttribute]);return ae?ae[e.valueAttribute]:""}),M=I(()=>{var ae,le;const k=((le=(ae=a.value.color)==null?void 0:ae[u.value])==null?void 0:le[e.variant])||a.value.variant[e.variant];return be(X(a.value.base,a.value.form,t.value,a.value.size[h.value],e.padded?a.value.padding[h.value]:"p-0",k==null?void 0:k.replaceAll("{color}",u.value),(s.value||p.leading)&&a.value.leading.padding[h.value],(f.value||p.trailing)&&a.value.trailing.padding[h.value]),e.selectClass)}),s=I(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),f=I(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),D=I(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),Q=I(()=>e.loading&&!s.value?e.loadingIcon:e.trailingIcon||e.icon),H=I(()=>X(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[h.value])),J=I(()=>X(a.value.icon.base,u.value&&j.ui.colors.includes(u.value)&&a.value.icon.color.replaceAll("{color}",u.value),a.value.icon.size[h.value],e.loading&&a.value.icon.loading)),te=I(()=>X(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[h.value])),m=I(()=>X(a.value.icon.base,u.value&&j.ui.colors.includes(u.value)&&a.value.icon.color.replaceAll("{color}",u.value),a.value.icon.size[h.value],e.loading&&!s.value&&a.value.icon.loading));return{ui:a,attrs:n,name:c,inputId:d,normalizedOptionsWithPlaceholder:C,normalizedValue:v,isLeading:s,isTrailing:f,selectClass:M,leadingIconName:D,leadingIconClass:J,leadingWrapperIconClass:H,trailingIconName:Q,trailingIconClass:m,trailingWrapperIconClass:te,onInput:x,onChange:$}}}),Xe=["id","name","value","required","disabled"],Ze=["value","label"],et=["value","selected","disabled","textContent"],tt=["value","selected","disabled","textContent"];function at(e,r,p,a,n,i){const t=me;return g(),B("div",{class:Z(e.ui.wrapper)},[z("select",W({id:e.inputId,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled||e.loading,class:e.selectClass},e.attrs,{onInput:r[0]||(r[0]=(...l)=>e.onInput&&e.onInput(...l)),onChange:r[1]||(r[1]=(...l)=>e.onChange&&e.onChange(...l))}),[(g(!0),B(Y,null,ie(e.normalizedOptionsWithPlaceholder,(l,d)=>(g(),B(Y,null,[l.children?(g(),B("optgroup",{key:`${l[e.valueAttribute]}-optgroup-${d}`,value:l[e.valueAttribute],label:l[e.optionAttribute]},[(g(!0),B(Y,null,ie(l.children,(u,y)=>(g(),B("option",{key:`${u[e.valueAttribute]}-${d}-${y}`,value:u[e.valueAttribute],selected:u[e.valueAttribute]===e.normalizedValue,disabled:u.disabled,textContent:E(u[e.optionAttribute])},null,8,et))),128))],8,Ze)):(g(),B("option",{key:`${l[e.valueAttribute]}-${d}`,value:l[e.valueAttribute],selected:l[e.valueAttribute]===e.normalizedValue,disabled:l.disabled,textContent:E(l[e.optionAttribute])},null,8,tt))],64))),256))],16,Xe),e.isLeading&&e.leadingIconName||e.$slots.leading?(g(),B("span",{key:0,class:Z(e.leadingWrapperIconClass)},[G(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[b(t,{name:e.leadingIconName,class:Z(e.leadingIconClass)},null,8,["name","class"])])],2)):U("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(g(),B("span",{key:1,class:Z(e.trailingWrapperIconClass)},[G(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[b(t,{name:e.trailingIconName,class:Z(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):U("",!0)],2)}const nt=ce(Je,[["render",at]]),ot=()=>{const a=[];for(let n=5;n<=50;n+=5)a.push(`${n}`);return a},ve=Symbol();var V=(e=>(e.Expenses="Expenses",e.Incomes="Incomes",e.RepeatableExpenses="RepeatableExpenses",e.RepeatableIncomes="RepeatableIncomes",e))(V||{});const lt=T({__name:"CategoriesFamilyList",props:{categoryId:{default:"",type:String,required:!1}},emits:["update"],setup(e,{emit:r}){const p=pe(ve),a=e,n=he(),{familyCategoriesIncome:i,familyCategoriesExpense:t,familyLoaded:l}=re(n),d=I(()=>p===V.Incomes||p===V.RepeatableIncomes?i.value:t.value),u=r,y=P(d.value[0]);Ce(l,()=>{y.value=d.value[0],c()}),ge(()=>{a.categoryId&&(y.value=d.value.filter(h=>h.id===a.categoryId)[0]),c()});function c(){u("update",y.value)}return(h,x)=>{const $=Me,A=Ae,w=Le;return o(l)&&!o(d).length?(g(),O($,{key:0})):o(l)?(g(),O(A,{key:1,modelValue:o(y),"onUpdate:modelValue":x[0]||(x[0]=S=>ue(y)?y.value=S:null),options:o(d),class:"h-8","option-attribute":"name",onChange:c},null,8,["modelValue","options"])):(g(),O(w,{key:2,class:"h-8"}))}}}),st={class:"relative"},rt=T({__name:"DatePicker",setup(e){const r=P(""),p=P({input:"MM.DD.YYYY"}),a=P(!1);return(n,i)=>{const t=me,l=oe;return g(),O(o(Fe),{modelValue:o(r),"onUpdate:modelValue":i[0]||(i[0]=d=>ue(r)?r.value=d:null),color:"gray","is-dark":n.$colorMode.value==="dark",masks:o(p),onPopoverWillShow:i[1]||(i[1]=d=>a.value=!0),onPopoverWillHide:i[2]||(i[2]=d=>a.value=!1)},{default:F(({inputValue:d,togglePopover:u})=>[z("div",st,[b(l,{color:"primary",variant:o(a)?"solid":"outline",onClick:u},{default:F(()=>[Ie(E(d)+" ",1),b(t,{name:"i-heroicons-calendar-days",class:"ml-1"})]),_:2},1032,["variant","onClick"])])]),_:1},8,["modelValue","is-dark","masks"])}}});var ee=(e=>(e.Weekly="Weekly",e.BiWeekly="BiWeekly",e.EveryFourWeeks="EveryFourWeeks",e.Monthly="Monthly",e.Quarterly="Quarterly",e.SemiAnnually="SemiAnnually",e.Annuall="Annually",e))(ee||{});const it={class:"-mt-14 mb-4 text-center"},ut={class:"text-gray-500 dark:text-gray-400 text-xs"},dt=z("span",{class:"text-gray-500 dark:text-gray-400 text-xs"},"%",-1),ct={class:"flex space-x-4"},ft={key:0,class:"flex space-x-4"},mt={class:"flex justify-between space-x-2"},pt=T({__name:"FinancialAdd",props:{editMode:{type:Boolean},payload:{},isLoading:{type:Boolean}},emits:["editDone","createDone","deleteDone"],setup(e,{emit:r}){const{currencies:p}=re(ke()),a=pe(ve),n=$e(),i=e,t=P({id:"",value:0,tax:0,text:"",date:n().utc().format(),anotherDate:n().add(30,"day").utc().format(),frequency:ee.Weekly,status:K.Active,categoryId:"",currencyId:""}),l=Object.values(ee),d=Object.values(K),u=I(()=>{var C;return(C=p.value.filter(v=>v.id===t.value.currencyId)[0])==null?void 0:C.code}),y=I(()=>a===V.RepeatableExpenses),c=I(()=>a===V.RepeatableIncomes),h=I(()=>a===V.Incomes);ge(()=>{i.editMode&&(t.value=i.payload)});const x=r,$=C=>{const v=[];return C.value===0&&v.push({path:"value",message:"Значення має бути більше 0"}),v};async function A(){i.editMode?x("editDone",t.value):x("createDone",t.value)}function w(C){t.value.categoryId=C==null?void 0:C.id}function S(C){t.value.currencyId=C.id}const N=()=>{const C={[V.Expenses]:"",[V.Incomes]:"",[V.RepeatableIncomes]:"Наступна дата вкладу",[V.RepeatableExpenses]:"Наступна дата виставлення рахунку"};return a?C[a]:"Another date"};return(C,v)=>{const M=we,s=Ue,f=ze,D=lt,Q=rt,H=Ae,J=oe,te=je;return g(),B(Y,null,[z("h3",it,E(i.editMode?"Редагування":"Додавання"),1),b(te,{validate:$,state:o(t),class:"flex flex-col space-y-3",onSubmit:A},{default:F(()=>[z("div",{class:Z({"flex space-x-4":o(h)||o(c)})},[b(s,{label:"Сума",name:"value"},{default:F(()=>[b(M,{placeholder:"1 200",modelValue:o(t).value,"onUpdate:modelValue":v[0]||(v[0]=m=>o(t).value=m),type:"number"},{trailing:F(()=>[z("span",ut,E(o(u)),1)]),_:1},8,["modelValue"])]),_:1}),o(h)||o(c)?(g(),O(s,{key:0,label:"Податок",name:"tax"},{default:F(()=>[b(M,{placeholder:"Податок",modelValue:o(t).tax,"onUpdate:modelValue":v[1]||(v[1]=m=>o(t).tax=m),type:"number"},{trailing:F(()=>[dt]),_:1},8,["modelValue"])]),_:1})):U("",!0)],2),b(s,{label:"Валюта",name:"currencies"},{default:F(()=>[b(f,{"currency-id":i.payload.currencyId,onUpdate:S},null,8,["currency-id"])]),_:1}),b(s,{label:"Нотатка",name:"text"},{default:F(()=>[b(M,{placeholder:"Продукти та кока кола...",modelValue:o(t).text,"onUpdate:modelValue":v[2]||(v[2]=m=>o(t).text=m),type:"text"},null,8,["modelValue"])]),_:1}),b(s,{label:"Категорія",name:"categories"},{default:F(()=>[b(D,{"category-id":i.payload.categoryId,onUpdate:w},null,8,["category-id"])]),_:1}),z("div",ct,[b(s,{label:"Дата"},{default:F(()=>[b(Q,{modelValue:o(t).date,"onUpdate:modelValue":v[3]||(v[3]=m=>o(t).date=m)},null,8,["modelValue"])]),_:1}),o(c)||o(y)?(g(),O(s,{key:0,label:N()},{default:F(()=>[b(Q,{modelValue:o(t).anotherDate,"onUpdate:modelValue":v[4]||(v[4]=m=>o(t).anotherDate=m)},null,8,["modelValue"])]),_:1},8,["label"])):U("",!0)]),o(c)||o(y)?(g(),B("div",ft,[b(s,{label:"Frequency",name:"frequency"},{default:F(()=>[b(H,{modelValue:o(t).frequency,"onUpdate:modelValue":v[5]||(v[5]=m=>o(t).frequency=m),options:o(l),class:"h-8"},null,8,["modelValue","options"])]),_:1}),b(s,{label:"Status",name:"status"},{default:F(()=>[b(H,{modelValue:o(t).status,"onUpdate:modelValue":v[6]||(v[6]=m=>o(t).status=m),options:o(d),class:"h-8"},null,8,["modelValue","options"])]),_:1})])):U("",!0),z("div",mt,[b(J,{type:"submit",label:"Готово",loading:i.isLoading},null,8,["loading"]),i.editMode?(g(),O(J,{key:0,label:"Видалити",color:"rose",variant:"ghost",loading:i.isLoading,onClick:v[7]||(v[7]=m=>x("deleteDone"))},null,8,["loading"])):U("",!0)])]),_:1},8,["state"])],64)}}});function gt(){async function e(t,l,d,u){return _("/api/Expenses",{method:"get",query:{limit:t,offset:l,dateFrom:d,dateTo:u}}).then(y=>{const c=y;return{data:c.data.map(x=>i(x)),limit:c.limit,offset:c.offset,total:c.total}})}function r(t){return _("/api/Expenses",{method:"post",body:n(t)})}function p(t){return _(`/api/Expenses/${t.id}`,{method:"put",body:n(t)})}function a(t){return _(`/api/Expenses/${t}`,{method:"delete",body:{}})}function n(t){return{notes:t.text,cost:t.value,date:t.date,categoryId:t.categoryId,currencyId:t.currencyId}}function i(t){return{id:t.id,text:t.notes,value:t.cost,tax:0,date:t.date,anotherDate:"",frequency:ee.Weekly,status:K.Active,categoryId:t.categoryId,currencyId:t.currencyId}}return{getFinancial:e,postFinancial:r,changeFinancial:p,deleteFinancial:a}}function vt(){async function e(t,l,d,u){return _("/api/Incomes",{method:"get",query:{limit:t,offset:l,dateFrom:d,dateTo:u}}).then(y=>{const c=y;return{data:c.data.map(x=>i(x)),limit:c.limit,offset:c.offset,total:c.total}})}function r(t){return _("/api/Incomes",{method:"post",body:n(t)})}function p(t){return _(`/api/Incomes/${t.id}`,{method:"put",body:n(t)})}function a(t){return _(`/api/Incomes/${t}`,{method:"delete",body:{}})}function n(t){return{notes:t.text,amount:t.value,taxAmount:t.tax,date:t.date,categoryId:t.categoryId,currencyId:t.currencyId}}function i(t){return{id:t.id,text:t.notes,value:t.amount,tax:t.taxAmount,date:t.date,anotherDate:"",frequency:ee.Weekly,status:K.Active,categoryId:t.categoryId,currencyId:t.currencyId}}return{getFinancial:e,postFinancial:r,changeFinancial:p,deleteFinancial:a}}function yt(){async function e(t,l){return _("/api/RepeatableIncomes",{method:"get",query:{limit:t,offset:l}}).then(d=>{const u=d;return{data:u.data.map(c=>i(c)),limit:u.limit,offset:u.offset,total:u.total}})}function r(t){return _("/api/RepeatableIncomes",{method:"post",body:n(t)})}function p(t){return _(`/api/RepeatableIncomes/${t.id}`,{method:"put",body:n(t)})}function a(t){return _(`/api/RepeatableIncomes/${t}`,{method:"delete",body:{}})}function n(t){return{name:t.text,amount:t.value,taxAmount:t.tax,startDate:t.date,nextDepositDate:t.anotherDate,frequency:t.frequency,status:t.status,categoryId:t.categoryId,currencyId:t.currencyId}}function i(t){return{id:t.id,text:t.name,value:t.amount,tax:t.taxAmount,date:t.startDate,anotherDate:t.nextDepositDate,frequency:t.frequency,status:t.status,categoryId:t.categoryId,currencyId:t.currencyId}}return{getFinancial:e,postFinancial:r,changeFinancial:p,deleteFinancial:a}}function bt(){async function e(t,l){return _("/api/Subscriptions",{method:"get",query:{limit:t,offset:l}}).then(d=>{const u=d;return{data:u.data.map(c=>i(c)),limit:u.limit,offset:u.offset,total:u.total}})}async function r(t){return _("/api/Subscriptions",{method:"post",body:n(t)})}function p(t){return _(`/api/Subscriptions/${t.id}`,{method:"put",body:n(t)})}function a(t){return _(`/api/Subscriptions/${t}`,{method:"delete",body:{}})}function n(t){return{name:t.text,cost:t.value,startDate:t.date,nextBillingDate:t.anotherDate,frequency:t.frequency,status:t.status,categoryId:t.categoryId,currencyId:t.currencyId}}function i(t){return{id:t.id,text:t.name,value:t.cost,tax:0,date:t.startDate,anotherDate:t.nextBillingDate,frequency:t.frequency,status:t.status,categoryId:t.categoryId,currencyId:t.currencyId}}return{getFinancial:e,postFinancial:r,changeFinancial:p,deleteFinancial:a}}const It=e=>{switch(e){case V.Incomes:return vt();case V.Expenses:return gt();case V.RepeatableExpenses:return bt();case V.RepeatableIncomes:return yt();default:throw new Error("Invalid mode provided")}},ht={class:"flex flex-col max-w-sm mx-auto"},kt={key:0,class:"flex justify-between mt-4 mb-2"},Ct={class:"flex mt-4"},$t={class:"overflow-auto h-full"},At={class:"flex items-center justify-end m-2"},St={class:"px-4 py-5 flex-1"},wt=T({__name:"FinancialList",setup(e){const r=pe(ve),p=It(r),a=$e(),n=P({start:a().add(-30,"day").utc().format(),end:a().utc().format()}),i=ot(),t=xe({financialArray:[],page:1,totalItems:5,selectedLimitItems:i[2],isLoading:!1}),l=I(()=>parseInt(t.selectedLimitItems)),d=I(()=>(t.page-1)*l.value);Ce(()=>t.page,()=>{c()});const u=I(()=>r===V.Incomes),y=I(()=>r===V.Expenses);ge(()=>{c()});async function c(){const s=u||y?[l.value,d.value,n.value.start,n.value.end]:[l.value,d.value],f=await p.getFinancial(...s);t.financialArray=f.data,t.totalItems=f.total,d.value>t.totalItems&&(t.page=1)}async function h(s){t.isLoading=!0,await p.postFinancial(s).then(()=>C("Створено"))}async function x(s){t.isLoading=!0,await p.changeFinancial(s).then(()=>C("Змінено"))}async function $(s){t.isLoading=!0,await p.deleteFinancial(s).then(()=>C("Видалено"))}const A=P({id:"",value:0,tax:0,text:"",date:"",anotherDate:"",frequency:ee.Weekly,status:K.Active,categoryId:"",currencyId:""}),w=P(!1),S=P(!1),N=s=>{A.value=s,v(!0,!0)},C=s=>{Ve().add({title:s,timeout:3e3}),M(),v(!1,!1),t.isLoading=!1},v=(s,f)=>{w.value=s,S.value=f},M=()=>{n.value.end=a(n.value.end).add(1,"hour").utc().format(),c()};return(s,f)=>{const D=oe,Q=Ge,H=He,J=nt,te=De;return g(),B(Y,null,[z("div",ht,[o(u)||o(y)?(g(),B("div",kt,[b(Oe,{modelValue:o(n),"onUpdate:modelValue":[f[0]||(f[0]=m=>ue(n)?n.value=m:null),c]},null,8,["modelValue"]),b(D,{onClick:f[1]||(f[1]=m=>v(!0,!1)),variant:"outline",icon:"i-heroicons-plus-circle",class:"ml-auto",label:"Додати"})])):U("",!0),o(u)||o(y)?U("",!0):(g(),O(D,{key:1,onClick:f[2]||(f[2]=m=>v(!0,!1)),label:`Додати ${o(u)?"надходження":"витрати"}`,variant:"outline",icon:"i-heroicons-plus-circle",class:"mx-auto mb-2"},null,8,["label"])),(g(!0),B(Y,null,ie(o(t).financialArray,m=>(g(),O(Q,{key:m.id,text:m.text,value:m.value,"category-id":m.categoryId,"currency-id":m.currencyId,onClick:k=>N(m),class:"even:bg-slate-50 dark:even:bg-slate-900"},null,8,["text","value","category-id","currency-id","onClick"]))),128)),z("div",Ct,[b(H,{modelValue:o(t).page,"onUpdate:modelValue":f[3]||(f[3]=m=>o(t).page=m),"page-count":o(l),total:o(t).totalItems,class:"mr-auto"},null,8,["modelValue","page-count","total"]),b(J,{modelValue:o(t).selectedLimitItems,"onUpdate:modelValue":f[4]||(f[4]=m=>o(t).selectedLimitItems=m),options:o(i),onChange:c},null,8,["modelValue","options"])])]),b(te,{modelValue:o(w),"onUpdate:modelValue":f[7]||(f[7]=m=>ue(w)?w.value=m:null)},{default:F(()=>[z("div",$t,[z("div",At,[b(D,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",onClick:f[5]||(f[5]=m=>v(!1,!1))})]),z("div",St,[b(pt,{"edit-mode":o(S),payload:o(A),"is-loading":o(t).isLoading,onEditDone:x,onCreateDone:h,onDeleteDone:f[6]||(f[6]=m=>$(o(A).id))},null,8,["edit-mode","payload","is-loading"])])])]),_:1},8,["modelValue"])],64)}}});export{V as F,wt as _,ve as a};
