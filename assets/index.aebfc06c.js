import{u as U,_ as V,a as N}from"./CurrenciesList.vue.90b28cee.js";import{g as h,s as S,i as $,r as w,j as F,k as M,l as R,m as g,o as u,c as l,a as r,b as y,n as s,q as T,d as C,t as a,F as I,v as x,x as j}from"./entry.719a8b13.js";import"./usePopper.5fc39265.js";import"./hidden.b4181bc3.js";import"./Skeleton.3addd810.js";import"./disposables.ed35e013.js";function A(){function _(m,d,c){return $fetch("/api/Budget/summary",{method:"get",query:{dateFrom:m,dateTo:d,currencyId:c}})}return{getBudget:_}}const q={class:"flex space-x-2 mt-4 mb-2"},L=r("br",null,null,-1),H=r("br",null,null,-1),K=r("br",null,null,-1),O=r("h2",{class:"mt-4"},"Витрати",-1),P=r("h2",{class:"mt-4"},"Надходження",-1),z=h({__name:"MyBudget",setup(_){const m=U(),{currencies:d}=S($()),c=w({start:m().add(-30,"day").utc().format(),end:m().utc().format()}),e=F({totalIncomes:0,totalExpenses:0,netIncome:0,expensesByCategory:[],incomesByCategory:[],currencyId:"",currentCurrency:""});M(()=>{e.currencyId&&p()}),R(()=>e.currencyId,(t,o)=>{o===""&&p()});const B=g(()=>e.currentCurrency?i(e.currentCurrency,e.totalIncomes):e.totalIncomes),v=g(()=>e.currentCurrency?i(e.currentCurrency,e.totalExpenses):e.totalExpenses),b=g(()=>e.currentCurrency?i(e.currentCurrency,e.netIncome):e.netIncome);async function p(){const t=await A().getBudget(c.value.start,c.value.end,e.currencyId);e.totalIncomes=t.totalIncomes,e.totalExpenses=t.totalExpenses,e.netIncome=t.netIncome,e.expensesByCategory=t.expensesByCategory,e.incomesByCategory=t.incomesByCategory,e.currentCurrency=d.value.filter(o=>o.id===e.currencyId)[0].code}const k=t=>{e.currencyId=t.id},i=(t,o)=>{const f=new Map([["USD","en-IN"],["EUR","es-ES"],["UAH","uk-UK"]]);return Intl.NumberFormat(f.get(t),{style:"currency",currency:t,maximumSignificantDigits:3}).format(o)};return(t,o)=>{const f=V,E=N,D=j;return u(),l(I,null,[r("div",q,[y(f,{modelValue:s(c),"onUpdate:modelValue":o[0]||(o[0]=n=>T(c)?c.value=n:null)},null,8,["modelValue"]),y(E,{onUpdate:k}),y(D,{onClick:p,label:"Ok"})]),C(" Надходження після оподаткування: "+a(s(b))+" ",1),L,C(" Надходження до оподаткування: "+a(s(B))+" ",1),H,C(" Витрати з урухуванням сплати податку: "+a(s(v))+" ",1),K,O,(u(!0),l(I,null,x(s(e).expensesByCategory,n=>(u(),l("div",{key:n.id},[r("div",null,a(n.name)+": "+a(i(s(e).currentCurrency,n.totalAmount)),1)]))),128)),P,(u(!0),l(I,null,x(s(e).incomesByCategory,n=>(u(),l("div",{key:n.id},[r("div",null,a(n.name)+": "+a(i(s(e).currentCurrency,n.totalAmount)),1)]))),128))],64)}}}),G=r("h1",{class:"font-bold"},"Dashboard",-1),ee=h({__name:"index",setup(_){return(m,d)=>(u(),l("div",null,[G,y(z)]))}});export{ee as default};
